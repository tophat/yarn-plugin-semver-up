/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-semver-up",
factory: function (require) {
var plugin=(()=>{var an=Object.create,De=Object.defineProperty,on=Object.defineProperties,un=Object.getOwnPropertyDescriptor,ln=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertyNames,Pt=Object.getOwnPropertySymbols,fn=Object.getPrototypeOf,Dt=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable;var Gt=(t,e,r)=>e in t?De(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,P=(t,e)=>{for(var r in e||(e={}))Dt.call(e,r)&&Gt(t,r,e[r]);if(Pt)for(var r of Pt(e))pn.call(e,r)&&Gt(t,r,e[r]);return t},K=(t,e)=>on(t,ln(e)),hn=t=>De(t,"__esModule",{value:!0});var Ee=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gn=(t,e)=>{for(var r in e)De(t,r,{get:e[r],enumerable:!0})},En=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of cn(e))!Dt.call(t,s)&&s!=="default"&&De(t,s,{get:()=>e[s],enumerable:!(r=un(e,s))||r.enumerable});return t},Ce=t=>En(hn(De(t!=null?an(fn(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Je=S(se=>{"use strict";se.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;se.find=(t,e)=>t.nodes.find(r=>r.type===e);se.exceedsLimit=(t,e,r=1,s)=>s===!1||!se.isInteger(t)||!se.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=s;se.escapeNode=(t,e=0,r)=>{let s=t.nodes[e];!s||(r&&s.type===r||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)};se.encloseBrace=t=>t.type!=="brace"?!1:t.commas>>0+t.ranges>>0==0?(t.invalid=!0,!0):!1;se.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:t.commas>>0+t.ranges>>0==0||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;se.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;se.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);se.flatten=(...t)=>{let e=[],r=s=>{for(let n=0;n<s.length;n++){let i=s[n];Array.isArray(i)?r(i,e):i!==void 0&&e.push(i)}return e};return r(t),e}});var et=S((Fa,Mt)=>{"use strict";var Ut=Je();Mt.exports=(t,e={})=>{let r=(s,n={})=>{let i=e.escapeInvalid&&Ut.isInvalidBrace(n),a=s.invalid===!0&&e.escapeInvalid===!0,o="";if(s.value)return(i||a)&&Ut.isOpenOrClose(s)?"\\"+s.value:s.value;if(s.value)return s.value;if(s.nodes)for(let l of s.nodes)o+=r(l);return o};return r(t)}});var kt=S((Xa,qt)=>{"use strict";qt.exports=function(t){return typeof t=="number"?t-t==0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var Zt=S((ja,Qt)=>{"use strict";var Bt=kt(),xe=(t,e,r)=>{if(Bt(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(Bt(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let s=P({relaxZeros:!0},r);typeof s.strictZeros=="boolean"&&(s.relaxZeros=s.strictZeros===!1);let n=String(s.relaxZeros),i=String(s.shorthand),a=String(s.capture),o=String(s.wrap),l=t+":"+e+"="+n+i+a+o;if(xe.cache.hasOwnProperty(l))return xe.cache[l].result;let g=Math.min(t,e),h=Math.max(t,e);if(Math.abs(g-h)===1){let d=t+"|"+e;return s.capture?`(${d})`:s.wrap===!1?d:`(?:${d})`}let E=Vt(t)||Vt(e),u={min:t,max:e,a:g,b:h},L=[],$=[];if(E&&(u.isPadded=E,u.maxLen=String(u.max).length),g<0){let d=h<0?Math.abs(h):1;$=Ft(d,Math.abs(g),u,s),g=u.a=0}return h>=0&&(L=Ft(g,h,u,s)),u.negatives=$,u.positives=L,u.result=Rn($,L,s),s.capture===!0?u.result=`(${u.result})`:s.wrap!==!1&&L.length+$.length>1&&(u.result=`(?:${u.result})`),xe.cache[l]=u,u.result};function Rn(t,e,r){let s=ft(t,e,"-",!1,r)||[],n=ft(e,t,"",!1,r)||[],i=ft(t,e,"-?",!0,r)||[];return s.concat(i).concat(n).join("|")}function An(t,e){let r=1,s=1,n=jt(t,r),i=new Set([e]);for(;t<=n&&n<=e;)i.add(n),r+=1,n=jt(t,r);for(n=Kt(e+1,s)-1;t<n&&n<=e;)i.add(n),s+=1,n=Kt(e+1,s)-1;return i=[...i],i.sort(mn),i}function dn(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let s=yn(t,e),n=s.length,i="",a=0;for(let o=0;o<n;o++){let[l,g]=s[o];l===g?i+=l:l!=="0"||g!=="9"?i+=$n(l,g,r):a++}return a&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[a],digits:n}}function Ft(t,e,r,s){let n=An(t,e),i=[],a=t,o;for(let l=0;l<n.length;l++){let g=n[l],h=dn(String(a),String(g),s),E="";if(!r.isPadded&&o&&o.pattern===h.pattern){o.count.length>1&&o.count.pop(),o.count.push(h.count[0]),o.string=o.pattern+Wt(o.count),a=g+1;continue}r.isPadded&&(E=vn(g,r,s)),h.string=E+h.pattern+Wt(h.count),i.push(h),a=g+1,o=h}return i}function ft(t,e,r,s,n){let i=[];for(let a of t){let{string:o}=a;!s&&!Xt(e,"string",o)&&i.push(r+o),s&&Xt(e,"string",o)&&i.push(r+o)}return i}function yn(t,e){let r=[];for(let s=0;s<t.length;s++)r.push([t[s],e[s]]);return r}function mn(t,e){return t>e?1:e>t?-1:0}function Xt(t,e,r){return t.some(s=>s[e]===r)}function jt(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function Kt(t,e){return t-t%Math.pow(10,e)}function Wt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function $n(t,e,r){return`[${t}${e-t==1?"":"-"}${e}]`}function Vt(t){return/^-?(0+)\d/.test(t)}function vn(t,e,r){if(!e.isPadded)return t;let s=Math.abs(e.maxLen-String(t).length),n=r.relaxZeros!==!1;switch(s){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${s}}`:`0{${s}}`}}xe.cache={};xe.clearCache=()=>xe.cache={};Qt.exports=xe});var gt=S((Ka,nr)=>{"use strict";var Cn=Ee("util"),Yt=Zt(),zt=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),xn=t=>e=>t===!0?Number(e):String(e),pt=t=>typeof t=="number"||typeof t=="string"&&t!=="",Ge=t=>Number.isInteger(+t),ht=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},Sn=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,_n=(t,e,r)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return r===!1?String(t):t},Jt=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Tn=(t,e)=>{t.negatives.sort((a,o)=>a<o?-1:a>o?1:0),t.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=e.capture?"":"?:",s="",n="",i;return t.positives.length&&(s=t.positives.join("|")),t.negatives.length&&(n=`-(${r}${t.negatives.join("|")})`),s&&n?i=`${s}|${n}`:i=s||n,e.wrap?`(${r}${i})`:i},er=(t,e,r,s)=>{if(r)return Yt(t,e,P({wrap:!1},s));let n=String.fromCharCode(t);if(t===e)return n;let i=String.fromCharCode(e);return`[${n}-${i}]`},tr=(t,e,r)=>{if(Array.isArray(t)){let s=r.wrap===!0,n=r.capture?"":"?:";return s?`(${n}${t.join("|")})`:t.join("|")}return Yt(t,e,r)},rr=(...t)=>new RangeError("Invalid range arguments: "+Cn.inspect(...t)),sr=(t,e,r)=>{if(r.strictRanges===!0)throw rr([t,e]);return[]},In=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},bn=(t,e,r=1,s={})=>{let n=Number(t),i=Number(e);if(!Number.isInteger(n)||!Number.isInteger(i)){if(s.strictRanges===!0)throw rr([t,e]);return[]}n===0&&(n=0),i===0&&(i=0);let a=n>i,o=String(t),l=String(e),g=String(r);r=Math.max(Math.abs(r),1);let h=ht(o)||ht(l)||ht(g),E=h?Math.max(o.length,l.length,g.length):0,u=h===!1&&Sn(t,e,s)===!1,L=s.transform||xn(u);if(s.toRegex&&r===1)return er(Jt(t,E),Jt(e,E),!0,s);let $={negatives:[],positives:[]},d=N=>$[N<0?"negatives":"positives"].push(Math.abs(N)),C=[],_=0;for(;a?n>=i:n<=i;)s.toRegex===!0&&r>1?d(n):C.push(_n(L(n,_),E,u)),n=a?n-r:n+r,_++;return s.toRegex===!0?r>1?Tn($,s):tr(C,null,P({wrap:!1},s)):C},Ln=(t,e,r=1,s={})=>{if(!Ge(t)&&t.length>1||!Ge(e)&&e.length>1)return sr(t,e,s);let n=s.transform||(u=>String.fromCharCode(u)),i=`${t}`.charCodeAt(0),a=`${e}`.charCodeAt(0),o=i>a,l=Math.min(i,a),g=Math.max(i,a);if(s.toRegex&&r===1)return er(l,g,!1,s);let h=[],E=0;for(;o?i>=a:i<=a;)h.push(n(i,E)),i=o?i-r:i+r,E++;return s.toRegex===!0?tr(h,null,{wrap:!1,options:s}):h},tt=(t,e,r,s={})=>{if(e==null&&pt(t))return[t];if(!pt(t)||!pt(e))return sr(t,e,s);if(typeof r=="function")return tt(t,e,1,{transform:r});if(zt(r))return tt(t,e,0,r);let n=P({},s);return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,Ge(r)?Ge(t)&&Ge(e)?bn(t,e,r,n):Ln(t,e,Math.max(Math.abs(r),1),n):r!=null&&!zt(r)?In(r,n):tt(t,e,1,r)};nr.exports=tt});var or=S((Wa,ar)=>{"use strict";var On=gt(),ir=Je(),Nn=(t,e={})=>{let r=(s,n={})=>{let i=ir.isInvalidBrace(n),a=s.invalid===!0&&e.escapeInvalid===!0,o=i===!0||a===!0,l=e.escapeInvalid===!0?"\\":"",g="";if(s.isOpen===!0||s.isClose===!0)return l+s.value;if(s.type==="open")return o?l+s.value:"(";if(s.type==="close")return o?l+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":o?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let h=ir.reduce(s.nodes),E=On(...h,K(P({},e),{wrap:!1,toRegex:!0}));if(E.length!==0)return h.length>1&&E.length>1?`(${E})`:E}if(s.nodes)for(let h of s.nodes)g+=r(h,s);return g};return r(t)};ar.exports=Nn});var cr=S((Va,lr)=>{"use strict";var Hn=gt(),ur=et(),Le=Je(),Se=(t="",e="",r=!1)=>{let s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Le.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let i of n)s.push(Se(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),s.push(Array.isArray(i)?Se(n,i,r):n+i);return Le.flatten(s)},wn=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(n,i={})=>{n.queue=[];let a=i,o=i.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(n.invalid||n.dollar){o.push(Se(o.pop(),ur(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){o.push(Se(o.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let E=Le.reduce(n.nodes);if(Le.exceedsLimit(...E,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let u=Hn(...E,e);u.length===0&&(u=ur(n,e)),o.push(Se(o.pop(),u)),n.nodes=[];return}let l=Le.encloseBrace(n),g=n.queue,h=n;for(;h.type!=="brace"&&h.type!=="root"&&h.parent;)h=h.parent,g=h.queue;for(let E=0;E<n.nodes.length;E++){let u=n.nodes[E];if(u.type==="comma"&&n.type==="brace"){E===1&&g.push(""),g.push("");continue}if(u.type==="close"){o.push(Se(o.pop(),g,l));continue}if(u.value&&u.type!=="open"){g.push(Se(g.pop(),u.value));continue}u.nodes&&s(u,n)}return g};return Le.flatten(s(t))};lr.exports=wn});var pr=S((Qa,fr)=>{"use strict";fr.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Ar=S((Za,Rr)=>{"use strict";var Pn=et(),{MAX_LENGTH:hr,CHAR_BACKSLASH:Et,CHAR_BACKTICK:Dn,CHAR_COMMA:Gn,CHAR_DOT:Un,CHAR_LEFT_PARENTHESES:Mn,CHAR_RIGHT_PARENTHESES:qn,CHAR_LEFT_CURLY_BRACE:kn,CHAR_RIGHT_CURLY_BRACE:Bn,CHAR_LEFT_SQUARE_BRACKET:gr,CHAR_RIGHT_SQUARE_BRACKET:Er,CHAR_DOUBLE_QUOTE:Fn,CHAR_SINGLE_QUOTE:Xn,CHAR_NO_BREAK_SPACE:jn,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Kn}=pr(),Wn=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},s=typeof r.maxLength=="number"?Math.min(hr,r.maxLength):hr;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},i=[n],a=n,o=n,l=0,g=t.length,h=0,E=0,u,L={},$=()=>t[h++],d=C=>{if(C.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&C.type==="text"){o.value+=C.value;return}return a.nodes.push(C),C.parent=a,C.prev=o,o=C,C};for(d({type:"bos"});h<g;)if(a=i[i.length-1],u=$(),!(u===Kn||u===jn)){if(u===Et){d({type:"text",value:(e.keepEscaping?u:"")+$()});continue}if(u===Er){d({type:"text",value:"\\"+u});continue}if(u===gr){l++;let C=!0,_;for(;h<g&&(_=$());){if(u+=_,_===gr){l++;continue}if(_===Et){u+=$();continue}if(_===Er&&(l--,l===0))break}d({type:"text",value:u});continue}if(u===Mn){a=d({type:"paren",nodes:[]}),i.push(a),d({type:"text",value:u});continue}if(u===qn){if(a.type!=="paren"){d({type:"text",value:u});continue}a=i.pop(),d({type:"text",value:u}),a=i[i.length-1];continue}if(u===Fn||u===Xn||u===Dn){let C=u,_;for(e.keepQuotes!==!0&&(u="");h<g&&(_=$());){if(_===Et){u+=_+$();continue}if(_===C){e.keepQuotes===!0&&(u+=_);break}u+=_}d({type:"text",value:u});continue}if(u===kn){E++;let C=o.value&&o.value.slice(-1)==="$"||a.dollar===!0;a=d({type:"brace",open:!0,close:!1,dollar:C,depth:E,commas:0,ranges:0,nodes:[]}),i.push(a),d({type:"open",value:u});continue}if(u===Bn){if(a.type!=="brace"){d({type:"text",value:u});continue}let C="close";a=i.pop(),a.close=!0,d({type:C,value:u}),E--,a=i[i.length-1];continue}if(u===Gn&&E>0){if(a.ranges>0){a.ranges=0;let C=a.nodes.shift();a.nodes=[C,{type:"text",value:Pn(a)}]}d({type:"comma",value:u}),a.commas++;continue}if(u===Un&&E>0&&a.commas===0){let C=a.nodes;if(E===0||C.length===0){d({type:"text",value:u});continue}if(o.type==="dot"){if(a.range=[],o.value+=u,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){C.pop();let _=C[C.length-1];_.value+=o.value+u,o=_,a.ranges--;continue}d({type:"dot",value:u});continue}d({type:"text",value:u})}do if(a=i.pop(),a.type!=="root"){a.nodes.forEach(N=>{N.nodes||(N.type==="open"&&(N.isOpen=!0),N.type==="close"&&(N.isClose=!0),N.nodes||(N.type="text"),N.invalid=!0)});let C=i[i.length-1],_=C.nodes.indexOf(a);C.nodes.splice(_,1,...a.nodes)}while(i.length>0);return d({type:"eos"}),n};Rr.exports=Wn});var mr=S((Ya,yr)=>{"use strict";var dr=et(),Vn=or(),Qn=cr(),Zn=Ar(),ee=(t,e={})=>{let r=[];if(Array.isArray(t))for(let s of t){let n=ee.create(s,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(ee.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};ee.parse=(t,e={})=>Zn(t,e);ee.stringify=(t,e={})=>typeof t=="string"?dr(ee.parse(t,e),e):dr(t,e);ee.compile=(t,e={})=>(typeof t=="string"&&(t=ee.parse(t,e)),Vn(t,e));ee.expand=(t,e={})=>{typeof t=="string"&&(t=ee.parse(t,e));let r=Qn(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};ee.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?ee.compile(t,e):ee.expand(t,e);yr.exports=ee});var Ue=S((za,Sr)=>{"use strict";var Yn=Ee("path"),ce="\\\\/",$r=`[^${ce}]`,Re="\\.",zn="\\+",Jn="\\?",rt="\\/",ei="(?=.)",vr="[^/]",Rt=`(?:${rt}|$)`,Cr=`(?:^|${rt})`,At=`${Re}{1,2}${Rt}`,ti=`(?!${Re})`,ri=`(?!${Cr}${At})`,si=`(?!${Re}{0,1}${Rt})`,ni=`(?!${At})`,ii=`[^.${rt}]`,ai=`${vr}*?`,xr={DOT_LITERAL:Re,PLUS_LITERAL:zn,QMARK_LITERAL:Jn,SLASH_LITERAL:rt,ONE_CHAR:ei,QMARK:vr,END_ANCHOR:Rt,DOTS_SLASH:At,NO_DOT:ti,NO_DOTS:ri,NO_DOT_SLASH:si,NO_DOTS_SLASH:ni,QMARK_NO_DOT:ii,STAR:ai,START_ANCHOR:Cr},oi=K(P({},xr),{SLASH_LITERAL:`[${ce}]`,QMARK:$r,STAR:`${$r}*?`,DOTS_SLASH:`${Re}{1,2}(?:[${ce}]|$)`,NO_DOT:`(?!${Re})`,NO_DOTS:`(?!(?:^|[${ce}])${Re}{1,2}(?:[${ce}]|$))`,NO_DOT_SLASH:`(?!${Re}{0,1}(?:[${ce}]|$))`,NO_DOTS_SLASH:`(?!${Re}{1,2}(?:[${ce}]|$))`,QMARK_NO_DOT:`[^.${ce}]`,START_ANCHOR:`(?:^|[${ce}])`,END_ANCHOR:`(?:[${ce}]|$)`}),ui={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Sr.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ui,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Yn.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?oi:xr}}});var Me=S(J=>{"use strict";var li=Ee("path"),ci=process.platform==="win32",{REGEX_BACKSLASH:fi,REGEX_REMOVE_BACKSLASH:pi,REGEX_SPECIAL_CHARS:hi,REGEX_SPECIAL_CHARS_GLOBAL:gi}=Ue();J.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);J.hasRegexChars=t=>hi.test(t);J.isRegexChar=t=>t.length===1&&J.hasRegexChars(t);J.escapeRegex=t=>t.replace(gi,"\\$1");J.toPosixSlashes=t=>t.replace(fi,"/");J.removeBackslashes=t=>t.replace(pi,e=>e==="\\"?"":e);J.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};J.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:ci===!0||li.sep==="\\";J.escapeLast=(t,e,r)=>{let s=t.lastIndexOf(e,r);return s===-1?t:t[s-1]==="\\"?J.escapeLast(t,e,s-1):`${t.slice(0,s)}\\${t.slice(s)}`};J.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};J.wrapOutput=(t,e={},r={})=>{let s=r.contains?"":"^",n=r.contains?"":"$",i=`${s}(?:${t})${n}`;return e.negated===!0&&(i=`(?:^(?!${i}).*$)`),i}});var wr=S((eo,Hr)=>{"use strict";var _r=Me(),{CHAR_ASTERISK:dt,CHAR_AT:Ei,CHAR_BACKWARD_SLASH:qe,CHAR_COMMA:Ri,CHAR_DOT:yt,CHAR_EXCLAMATION_MARK:Tr,CHAR_FORWARD_SLASH:Ir,CHAR_LEFT_CURLY_BRACE:mt,CHAR_LEFT_PARENTHESES:$t,CHAR_LEFT_SQUARE_BRACKET:Ai,CHAR_PLUS:di,CHAR_QUESTION_MARK:br,CHAR_RIGHT_CURLY_BRACE:yi,CHAR_RIGHT_PARENTHESES:Lr,CHAR_RIGHT_SQUARE_BRACKET:mi}=Ue(),Or=t=>t===Ir||t===qe,Nr=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?Infinity:1)},$i=(t,e)=>{let r=e||{},s=t.length-1,n=r.parts===!0||r.scanToEnd===!0,i=[],a=[],o=[],l=t,g=-1,h=0,E=0,u=!1,L=!1,$=!1,d=!1,C=!1,_=!1,N=!1,H=!1,M=!1,he=0,$e,v,I={value:"",depth:0,isGlob:!1},ue=()=>g>=s,z=()=>l.charCodeAt(g+1),p=()=>($e=v,l.charCodeAt(++g));for(;g<s;){v=p();let c;if(v===qe){N=I.backslashes=!0,v=p(),v===mt&&(_=!0);continue}if(_===!0||v===mt){for(he++;ue()!==!0&&(v=p());){if(v===qe){N=I.backslashes=!0,p();continue}if(v===mt){he++;continue}if(_!==!0&&v===yt&&(v=p())===yt){if(u=I.isBrace=!0,$=I.isGlob=!0,M=!0,n===!0)continue;break}if(_!==!0&&v===Ri){if(u=I.isBrace=!0,$=I.isGlob=!0,M=!0,n===!0)continue;break}if(v===yi&&(he--,he===0)){_=!1,u=I.isBrace=!0,M=!0;break}}if(n===!0)continue;break}if(v===Ir){if(i.push(g),a.push(I),I={value:"",depth:0,isGlob:!1},M===!0)continue;if($e===yt&&g===h+1){h+=2;continue}E=g+1;continue}if(r.noext!==!0&&(v===di||v===Ei||v===dt||v===br||v===Tr)===!0&&z()===$t){if($=I.isGlob=!0,d=I.isExtglob=!0,M=!0,n===!0){for(;ue()!==!0&&(v=p());){if(v===qe){N=I.backslashes=!0,v=p();continue}if(v===Lr){$=I.isGlob=!0,M=!0;break}}continue}break}if(v===dt){if($e===dt&&(C=I.isGlobstar=!0),$=I.isGlob=!0,M=!0,n===!0)continue;break}if(v===br){if($=I.isGlob=!0,M=!0,n===!0)continue;break}if(v===Ai){for(;ue()!==!0&&(c=p());){if(c===qe){N=I.backslashes=!0,p();continue}if(c===mi){L=I.isBracket=!0,$=I.isGlob=!0,M=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&v===Tr&&g===h){H=I.negated=!0,h++;continue}if(r.noparen!==!0&&v===$t){if($=I.isGlob=!0,n===!0){for(;ue()!==!0&&(v=p());){if(v===$t){N=I.backslashes=!0,v=p();continue}if(v===Lr){M=!0;break}}continue}break}if($===!0){if(M=!0,n===!0)continue;break}}r.noext===!0&&(d=!1,$=!1);let w=l,re="",ie="";h>0&&(re=l.slice(0,h),l=l.slice(h),E-=h),w&&$===!0&&E>0?(w=l.slice(0,E),ie=l.slice(E)):$===!0?(w="",ie=l):w=l,w&&w!==""&&w!=="/"&&w!==l&&Or(w.charCodeAt(w.length-1))&&(w=w.slice(0,-1)),r.unescape===!0&&(ie&&(ie=_r.removeBackslashes(ie)),w&&N===!0&&(w=_r.removeBackslashes(w)));let f={prefix:re,input:t,start:h,base:w,glob:ie,isBrace:u,isBracket:L,isGlob:$,isExtglob:d,isGlobstar:C,negated:H};if(r.tokens===!0&&(f.maxDepth=0,Or(v)||a.push(I),f.tokens=a),r.parts===!0||r.tokens===!0){let c;for(let F=0;F<i.length;F++){let X=c?c+1:h,ae=i[F],le=t.slice(X,ae);r.tokens&&(F===0&&h!==0?(a[F].isPrefix=!0,a[F].value=re):a[F].value=le,Nr(a[F]),f.maxDepth+=a[F].depth),(F!==0||le!=="")&&o.push(le),c=ae}if(c&&c+1<t.length){let F=t.slice(c+1);o.push(F),r.tokens&&(a[a.length-1].value=F,Nr(a[a.length-1]),f.maxDepth+=a[a.length-1].depth)}f.slashes=i,f.parts=o}return f};Hr.exports=$i});var Ur=S((to,Gr)=>{"use strict";var st=Ue(),te=Me(),{MAX_LENGTH:nt,POSIX_REGEX_SOURCE:vi,REGEX_NON_SPECIAL_CHARS:Ci,REGEX_SPECIAL_CHARS_BACKREF:xi,REPLACEMENTS:Pr}=st,Si=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch(s){return t.map(n=>te.escapeRegex(n)).join("..")}return r},Oe=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Dr=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Pr[t]||t;let r=P({},e),s=typeof r.maxLength=="number"?Math.min(nt,r.maxLength):nt,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);let i={type:"bos",value:"",output:r.prepend||""},a=[i],o=r.capture?"":"?:",l=te.isWindows(e),g=st.globChars(l),h=st.extglobChars(g),{DOT_LITERAL:E,PLUS_LITERAL:u,SLASH_LITERAL:L,ONE_CHAR:$,DOTS_SLASH:d,NO_DOT:C,NO_DOT_SLASH:_,NO_DOTS_SLASH:N,QMARK:H,QMARK_NO_DOT:M,STAR:he,START_ANCHOR:$e}=g,v=A=>`(${o}(?:(?!${$e}${A.dot?d:E}).)*?)`,I=r.dot?"":C,ue=r.dot?H:M,z=r.bash===!0?v(r):he;r.capture&&(z=`(${z})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let p={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};t=te.removePrefix(t,p),n=t.length;let w=[],re=[],ie=[],f=i,c,F=()=>p.index===n-1,X=p.peek=(A=1)=>t[p.index+A],ae=p.advance=()=>t[++p.index],le=()=>t.slice(p.index+1),ge=(A="",D=0)=>{p.consumed+=A,p.index+=D},Qe=A=>{p.output+=A.output!=null?A.output:A.value,ge(A.value)},sn=()=>{let A=1;for(;X()==="!"&&(X(2)!=="("||X(3)==="?");)ae(),p.start++,A++;return A%2==0?!1:(p.negated=!0,p.start++,!0)},Ze=A=>{p[A]++,ie.push(A)},ve=A=>{p[A]--,ie.pop()},T=A=>{if(f.type==="globstar"){let D=p.braces>0&&(A.type==="comma"||A.type==="brace"),R=A.extglob===!0||w.length&&(A.type==="pipe"||A.type==="paren");A.type!=="slash"&&A.type!=="paren"&&!D&&!R&&(p.output=p.output.slice(0,-f.output.length),f.type="star",f.value="*",f.output=z,p.output+=f.output)}if(w.length&&A.type!=="paren"&&!h[A.value]&&(w[w.length-1].inner+=A.value),(A.value||A.output)&&Qe(A),f&&f.type==="text"&&A.type==="text"){f.value+=A.value,f.output=(f.output||"")+A.value;return}A.prev=f,a.push(A),f=A},Ye=(A,D)=>{let R=K(P({},h[D]),{conditions:1,inner:""});R.prev=f,R.parens=p.parens,R.output=p.output;let b=(r.capture?"(":"")+R.open;Ze("parens"),T({type:A,value:D,output:p.output?"":$}),T({type:"paren",extglob:!0,value:ae(),output:b}),w.push(R)},nn=A=>{let D=A.close+(r.capture?")":"");if(A.type==="negate"){let R=z;A.inner&&A.inner.length>1&&A.inner.includes("/")&&(R=v(r)),(R!==z||F()||/^\)+$/.test(le()))&&(D=A.close=`)$))${R}`),A.prev.type==="bos"&&(p.negatedExtglob=!0)}T({type:"paren",extglob:!0,value:c,output:D}),ve("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let A=!1,D=t.replace(xi,(R,b,q,Z,j,ct)=>Z==="\\"?(A=!0,R):Z==="?"?b?b+Z+(j?H.repeat(j.length):""):ct===0?ue+(j?H.repeat(j.length):""):H.repeat(q.length):Z==="."?E.repeat(q.length):Z==="*"?b?b+Z+(j?z:""):z:b?R:`\\${R}`);return A===!0&&(r.unescape===!0?D=D.replace(/\\/g,""):D=D.replace(/\\+/g,R=>R.length%2==0?"\\\\":R?"\\":"")),D===t&&r.contains===!0?(p.output=t,p):(p.output=te.wrapOutput(D,p,e),p)}for(;!F();){if(c=ae(),c==="\0")continue;if(c==="\\"){let R=X();if(R==="/"&&r.bash!==!0||R==="."||R===";")continue;if(!R){c+="\\",T({type:"text",value:c});continue}let b=/^\\+/.exec(le()),q=0;if(b&&b[0].length>2&&(q=b[0].length,p.index+=q,q%2!=0&&(c+="\\")),r.unescape===!0?c=ae()||"":c+=ae()||"",p.brackets===0){T({type:"text",value:c});continue}}if(p.brackets>0&&(c!=="]"||f.value==="["||f.value==="[^")){if(r.posix!==!1&&c===":"){let R=f.value.slice(1);if(R.includes("[")&&(f.posix=!0,R.includes(":"))){let b=f.value.lastIndexOf("["),q=f.value.slice(0,b),Z=f.value.slice(b+2),j=vi[Z];if(j){f.value=q+j,p.backtrack=!0,ae(),!i.output&&a.indexOf(f)===1&&(i.output=$);continue}}}(c==="["&&X()!==":"||c==="-"&&X()==="]")&&(c=`\\${c}`),c==="]"&&(f.value==="["||f.value==="[^")&&(c=`\\${c}`),r.posix===!0&&c==="!"&&f.value==="["&&(c="^"),f.value+=c,Qe({value:c});continue}if(p.quotes===1&&c!=='"'){c=te.escapeRegex(c),f.value+=c,Qe({value:c});continue}if(c==='"'){p.quotes=p.quotes===1?0:1,r.keepQuotes===!0&&T({type:"text",value:c});continue}if(c==="("){Ze("parens"),T({type:"paren",value:c});continue}if(c===")"){if(p.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Oe("opening","("));let R=w[w.length-1];if(R&&p.parens===R.parens+1){nn(w.pop());continue}T({type:"paren",value:c,output:p.parens?")":"\\)"}),ve("parens");continue}if(c==="["){if(r.nobracket===!0||!le().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Oe("closing","]"));c=`\\${c}`}else Ze("brackets");T({type:"bracket",value:c});continue}if(c==="]"){if(r.nobracket===!0||f&&f.type==="bracket"&&f.value.length===1){T({type:"text",value:c,output:`\\${c}`});continue}if(p.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Oe("opening","["));T({type:"text",value:c,output:`\\${c}`});continue}ve("brackets");let R=f.value.slice(1);if(f.posix!==!0&&R[0]==="^"&&!R.includes("/")&&(c=`/${c}`),f.value+=c,Qe({value:c}),r.literalBrackets===!1||te.hasRegexChars(R))continue;let b=te.escapeRegex(f.value);if(p.output=p.output.slice(0,-f.value.length),r.literalBrackets===!0){p.output+=b,f.value=b;continue}f.value=`(${o}${b}|${f.value})`,p.output+=f.value;continue}if(c==="{"&&r.nobrace!==!0){Ze("braces");let R={type:"brace",value:c,output:"(",outputIndex:p.output.length,tokensIndex:p.tokens.length};re.push(R),T(R);continue}if(c==="}"){let R=re[re.length-1];if(r.nobrace===!0||!R){T({type:"text",value:c,output:c});continue}let b=")";if(R.dots===!0){let q=a.slice(),Z=[];for(let j=q.length-1;j>=0&&(a.pop(),q[j].type!=="brace");j--)q[j].type!=="dots"&&Z.unshift(q[j].value);b=Si(Z,r),p.backtrack=!0}if(R.comma!==!0&&R.dots!==!0){let q=p.output.slice(0,R.outputIndex),Z=p.tokens.slice(R.tokensIndex);R.value=R.output="\\{",c=b="\\}",p.output=q;for(let j of Z)p.output+=j.output||j.value}T({type:"brace",value:c,output:b}),ve("braces"),re.pop();continue}if(c==="|"){w.length>0&&w[w.length-1].conditions++,T({type:"text",value:c});continue}if(c===","){let R=c,b=re[re.length-1];b&&ie[ie.length-1]==="braces"&&(b.comma=!0,R="|"),T({type:"comma",value:c,output:R});continue}if(c==="/"){if(f.type==="dot"&&p.index===p.start+1){p.start=p.index+1,p.consumed="",p.output="",a.pop(),f=i;continue}T({type:"slash",value:c,output:L});continue}if(c==="."){if(p.braces>0&&f.type==="dot"){f.value==="."&&(f.output=E);let R=re[re.length-1];f.type="dots",f.output+=c,f.value+=c,R.dots=!0;continue}if(p.braces+p.parens===0&&f.type!=="bos"&&f.type!=="slash"){T({type:"text",value:c,output:E});continue}T({type:"dot",value:c,output:E});continue}if(c==="?"){if(!(f&&f.value==="(")&&r.noextglob!==!0&&X()==="("&&X(2)!=="?"){Ye("qmark",c);continue}if(f&&f.type==="paren"){let b=X(),q=c;if(b==="<"&&!te.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(f.value==="("&&!/[!=<:]/.test(b)||b==="<"&&!/<([!=]|\w+>)/.test(le()))&&(q=`\\${c}`),T({type:"text",value:c,output:q});continue}if(r.dot!==!0&&(f.type==="slash"||f.type==="bos")){T({type:"qmark",value:c,output:M});continue}T({type:"qmark",value:c,output:H});continue}if(c==="!"){if(r.noextglob!==!0&&X()==="("&&(X(2)!=="?"||!/[!=<:]/.test(X(3)))){Ye("negate",c);continue}if(r.nonegate!==!0&&p.index===0){sn();continue}}if(c==="+"){if(r.noextglob!==!0&&X()==="("&&X(2)!=="?"){Ye("plus",c);continue}if(f&&f.value==="("||r.regex===!1){T({type:"plus",value:c,output:u});continue}if(f&&(f.type==="bracket"||f.type==="paren"||f.type==="brace")||p.parens>0){T({type:"plus",value:c});continue}T({type:"plus",value:u});continue}if(c==="@"){if(r.noextglob!==!0&&X()==="("&&X(2)!=="?"){T({type:"at",extglob:!0,value:c,output:""});continue}T({type:"text",value:c});continue}if(c!=="*"){(c==="$"||c==="^")&&(c=`\\${c}`);let R=Ci.exec(le());R&&(c+=R[0],p.index+=R[0].length),T({type:"text",value:c});continue}if(f&&(f.type==="globstar"||f.star===!0)){f.type="star",f.star=!0,f.value+=c,f.output=z,p.backtrack=!0,p.globstar=!0,ge(c);continue}let A=le();if(r.noextglob!==!0&&/^\([^?]/.test(A)){Ye("star",c);continue}if(f.type==="star"){if(r.noglobstar===!0){ge(c);continue}let R=f.prev,b=R.prev,q=R.type==="slash"||R.type==="bos",Z=b&&(b.type==="star"||b.type==="globstar");if(r.bash===!0&&(!q||A[0]&&A[0]!=="/")){T({type:"star",value:c,output:""});continue}let j=p.braces>0&&(R.type==="comma"||R.type==="brace"),ct=w.length&&(R.type==="pipe"||R.type==="paren");if(!q&&R.type!=="paren"&&!j&&!ct){T({type:"star",value:c,output:""});continue}for(;A.slice(0,3)==="/**";){let ze=t[p.index+4];if(ze&&ze!=="/")break;A=A.slice(3),ge("/**",3)}if(R.type==="bos"&&F()){f.type="globstar",f.value+=c,f.output=v(r),p.output=f.output,p.globstar=!0,ge(c);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&!Z&&F()){p.output=p.output.slice(0,-(R.output+f.output).length),R.output=`(?:${R.output}`,f.type="globstar",f.output=v(r)+(r.strictSlashes?")":"|$)"),f.value+=c,p.globstar=!0,p.output+=R.output+f.output,ge(c);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&A[0]==="/"){let ze=A[1]!==void 0?"|$":"";p.output=p.output.slice(0,-(R.output+f.output).length),R.output=`(?:${R.output}`,f.type="globstar",f.output=`${v(r)}${L}|${L}${ze})`,f.value+=c,p.output+=R.output+f.output,p.globstar=!0,ge(c+ae()),T({type:"slash",value:"/",output:""});continue}if(R.type==="bos"&&A[0]==="/"){f.type="globstar",f.value+=c,f.output=`(?:^|${L}|${v(r)}${L})`,p.output=f.output,p.globstar=!0,ge(c+ae()),T({type:"slash",value:"/",output:""});continue}p.output=p.output.slice(0,-f.output.length),f.type="globstar",f.output=v(r),f.value+=c,p.output+=f.output,p.globstar=!0,ge(c);continue}let D={type:"star",value:c,output:z};if(r.bash===!0){D.output=".*?",(f.type==="bos"||f.type==="slash")&&(D.output=I+D.output),T(D);continue}if(f&&(f.type==="bracket"||f.type==="paren")&&r.regex===!0){D.output=c,T(D);continue}(p.index===p.start||f.type==="slash"||f.type==="dot")&&(f.type==="dot"?(p.output+=_,f.output+=_):r.dot===!0?(p.output+=N,f.output+=N):(p.output+=I,f.output+=I),X()!=="*"&&(p.output+=$,f.output+=$)),T(D)}for(;p.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Oe("closing","]"));p.output=te.escapeLast(p.output,"["),ve("brackets")}for(;p.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Oe("closing",")"));p.output=te.escapeLast(p.output,"("),ve("parens")}for(;p.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Oe("closing","}"));p.output=te.escapeLast(p.output,"{"),ve("braces")}if(r.strictSlashes!==!0&&(f.type==="star"||f.type==="bracket")&&T({type:"maybe_slash",value:"",output:`${L}?`}),p.backtrack===!0){p.output="";for(let A of p.tokens)p.output+=A.output!=null?A.output:A.value,A.suffix&&(p.output+=A.suffix)}return p};Dr.fastpaths=(t,e)=>{let r=P({},e),s=typeof r.maxLength=="number"?Math.min(nt,r.maxLength):nt,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);t=Pr[t]||t;let i=te.isWindows(e),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:l,DOTS_SLASH:g,NO_DOT:h,NO_DOTS:E,NO_DOTS_SLASH:u,STAR:L,START_ANCHOR:$}=st.globChars(i),d=r.dot?E:h,C=r.dot?u:h,_=r.capture?"":"?:",N={negated:!1,prefix:""},H=r.bash===!0?".*?":L;r.capture&&(H=`(${H})`);let M=I=>I.noglobstar===!0?H:`(${_}(?:(?!${$}${I.dot?g:a}).)*?)`,he=I=>{switch(I){case"*":return`${d}${l}${H}`;case".*":return`${a}${l}${H}`;case"*.*":return`${d}${H}${a}${l}${H}`;case"*/*":return`${d}${H}${o}${l}${C}${H}`;case"**":return d+M(r);case"**/*":return`(?:${d}${M(r)}${o})?${C}${l}${H}`;case"**/*.*":return`(?:${d}${M(r)}${o})?${C}${H}${a}${l}${H}`;case"**/.*":return`(?:${d}${M(r)}${o})?${a}${l}${H}`;default:{let ue=/^(.*?)\.(\w+)$/.exec(I);if(!ue)return;let z=he(ue[1]);return z?z+a+ue[2]:void 0}}},$e=te.removePrefix(t,N),v=he($e);return v&&r.strictSlashes!==!0&&(v+=`${o}?`),v};Gr.exports=Dr});var qr=S((ro,Mr)=>{"use strict";var _i=Ee("path"),Ti=wr(),vt=Ur(),Ct=Me(),Ii=Ue(),bi=t=>t&&typeof t=="object"&&!Array.isArray(t),k=(t,e,r=!1)=>{if(Array.isArray(t)){let h=t.map(u=>k(u,e,r));return u=>{for(let L of h){let $=L(u);if($)return $}return!1}}let s=bi(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},i=Ct.isWindows(e),a=s?k.compileRe(t,e):k.makeRe(t,e,!1,!0),o=a.state;delete a.state;let l=()=>!1;if(n.ignore){let h=K(P({},e),{ignore:null,onMatch:null,onResult:null});l=k(n.ignore,h,r)}let g=(h,E=!1)=>{let{isMatch:u,match:L,output:$}=k.test(h,a,e,{glob:t,posix:i}),d={glob:t,state:o,regex:a,posix:i,input:h,output:$,match:L,isMatch:u};return typeof n.onResult=="function"&&n.onResult(d),u===!1?(d.isMatch=!1,E?d:!1):l(h)?(typeof n.onIgnore=="function"&&n.onIgnore(d),d.isMatch=!1,E?d:!1):(typeof n.onMatch=="function"&&n.onMatch(d),E?d:!0)};return r&&(g.state=o),g};k.test=(t,e,r,{glob:s,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let i=r||{},a=i.format||(n?Ct.toPosixSlashes:null),o=t===s,l=o&&a?a(t):t;return o===!1&&(l=a?a(t):t,o=l===s),(o===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?o=k.matchBase(t,e,r,n):o=e.exec(l)),{isMatch:Boolean(o),match:o,output:l}};k.matchBase=(t,e,r,s=Ct.isWindows(r))=>(e instanceof RegExp?e:k.makeRe(e,r)).test(_i.basename(t));k.isMatch=(t,e,r)=>k(e,r)(t);k.parse=(t,e)=>Array.isArray(t)?t.map(r=>k.parse(r,e)):vt(t,K(P({},e),{fastpaths:!1}));k.scan=(t,e)=>Ti(t,e);k.compileRe=(t,e,r=!1,s=!1)=>{if(r===!0)return t.output;let n=e||{},i=n.contains?"":"^",a=n.contains?"":"$",o=`${i}(?:${t.output})${a}`;t&&t.negated===!0&&(o=`^(?!${o}).*$`);let l=k.toRegex(o,e);return s===!0&&(l.state=t),l};k.makeRe=(t,e,r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n=e||{},i={negated:!1,fastpaths:!0},a="",o;return t.startsWith("./")&&(t=t.slice(2),a=i.prefix="./"),n.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(o=vt.fastpaths(t,e)),o===void 0?(i=vt(t,e),i.prefix=a+(i.prefix||"")):i.output=o,k.compileRe(i,e,r,s)};k.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};k.constants=Ii;Mr.exports=k});var Br=S((so,kr)=>{"use strict";kr.exports=qr()});var Wr=S((no,Kr)=>{"use strict";var Fr=Ee("util"),Xr=mr(),fe=Br(),xt=Me(),jr=t=>t===""||t==="./",G=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let s=new Set,n=new Set,i=new Set,a=0,o=h=>{i.add(h.output),r&&r.onResult&&r.onResult(h)};for(let h=0;h<e.length;h++){let E=fe(String(e[h]),K(P({},r),{onResult:o}),!0),u=E.state.negated||E.state.negatedExtglob;u&&a++;for(let L of t){let $=E(L,!0);!(u?!$.isMatch:$.isMatch)||(u?s.add($.output):(s.delete($.output),n.add($.output)))}}let g=(a===e.length?[...i]:[...n]).filter(h=>!s.has(h));if(r&&g.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(h=>h.replace(/\\/g,"")):e}return g};G.match=G;G.matcher=(t,e)=>fe(t,e);G.isMatch=(t,e,r)=>fe(e,r)(t);G.any=G.isMatch;G.not=(t,e,r={})=>{e=[].concat(e).map(String);let s=new Set,n=[],i=o=>{r.onResult&&r.onResult(o),n.push(o.output)},a=G(t,e,K(P({},r),{onResult:i}));for(let o of n)a.includes(o)||s.add(o);return[...s]};G.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Fr.inspect(t)}"`);if(Array.isArray(e))return e.some(s=>G.contains(t,s,r));if(typeof e=="string"){if(jr(t)||jr(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return G.isMatch(t,e,K(P({},r),{contains:!0}))};G.matchKeys=(t,e,r)=>{if(!xt.isObject(t))throw new TypeError("Expected the first argument to be an object");let s=G(Object.keys(t),e,r),n={};for(let i of s)n[i]=t[i];return n};G.some=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=fe(String(n),r);if(s.some(a=>i(a)))return!0}return!1};G.every=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=fe(String(n),r);if(!s.every(a=>i(a)))return!1}return!0};G.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Fr.inspect(t)}"`);return[].concat(e).every(s=>fe(s,r)(t))};G.capture=(t,e,r)=>{let s=xt.isWindows(r),i=fe.makeRe(String(t),K(P({},r),{capture:!0})).exec(s?xt.toPosixSlashes(e):e);if(i)return i.slice(1).map(a=>a===void 0?"":a)};G.makeRe=(...t)=>fe.makeRe(...t);G.scan=(...t)=>fe.scan(...t);G.parse=(t,e)=>{let r=[];for(let s of[].concat(t||[]))for(let n of Xr(String(s),e))r.push(fe.parse(n,e));return r};G.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:Xr(t,e)};G.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return G.braces(t,K(P({},e),{expand:!0}))};Kr.exports=G});var it=S((io,Vr)=>{var Li="2.0.0",Oi=256,Ni=Number.MAX_SAFE_INTEGER||9007199254740991,Hi=16;Vr.exports={SEMVER_SPEC_VERSION:Li,MAX_LENGTH:Oi,MAX_SAFE_INTEGER:Ni,MAX_SAFE_COMPONENT_LENGTH:Hi}});var ke=S((ao,Qr)=>{var wi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Qr.exports=wi});var Be=S((me,Zr)=>{var{MAX_SAFE_COMPONENT_LENGTH:St}=it(),Pi=ke();me=Zr.exports={};var Di=me.re=[],y=me.src=[],m=me.t={},Gi=0,x=(t,e,r)=>{let s=Gi++;Pi(s,e),m[t]=s,y[s]=e,Di[s]=new RegExp(e,r?"g":void 0)};x("NUMERICIDENTIFIER","0|[1-9]\\d*");x("NUMERICIDENTIFIERLOOSE","[0-9]+");x("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");x("MAINVERSION",`(${y[m.NUMERICIDENTIFIER]})\\.(${y[m.NUMERICIDENTIFIER]})\\.(${y[m.NUMERICIDENTIFIER]})`);x("MAINVERSIONLOOSE",`(${y[m.NUMERICIDENTIFIERLOOSE]})\\.(${y[m.NUMERICIDENTIFIERLOOSE]})\\.(${y[m.NUMERICIDENTIFIERLOOSE]})`);x("PRERELEASEIDENTIFIER",`(?:${y[m.NUMERICIDENTIFIER]}|${y[m.NONNUMERICIDENTIFIER]})`);x("PRERELEASEIDENTIFIERLOOSE",`(?:${y[m.NUMERICIDENTIFIERLOOSE]}|${y[m.NONNUMERICIDENTIFIER]})`);x("PRERELEASE",`(?:-(${y[m.PRERELEASEIDENTIFIER]}(?:\\.${y[m.PRERELEASEIDENTIFIER]})*))`);x("PRERELEASELOOSE",`(?:-?(${y[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${y[m.PRERELEASEIDENTIFIERLOOSE]})*))`);x("BUILDIDENTIFIER","[0-9A-Za-z-]+");x("BUILD",`(?:\\+(${y[m.BUILDIDENTIFIER]}(?:\\.${y[m.BUILDIDENTIFIER]})*))`);x("FULLPLAIN",`v?${y[m.MAINVERSION]}${y[m.PRERELEASE]}?${y[m.BUILD]}?`);x("FULL",`^${y[m.FULLPLAIN]}$`);x("LOOSEPLAIN",`[v=\\s]*${y[m.MAINVERSIONLOOSE]}${y[m.PRERELEASELOOSE]}?${y[m.BUILD]}?`);x("LOOSE",`^${y[m.LOOSEPLAIN]}$`);x("GTLT","((?:<|>)?=?)");x("XRANGEIDENTIFIERLOOSE",`${y[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);x("XRANGEIDENTIFIER",`${y[m.NUMERICIDENTIFIER]}|x|X|\\*`);x("XRANGEPLAIN",`[v=\\s]*(${y[m.XRANGEIDENTIFIER]})(?:\\.(${y[m.XRANGEIDENTIFIER]})(?:\\.(${y[m.XRANGEIDENTIFIER]})(?:${y[m.PRERELEASE]})?${y[m.BUILD]}?)?)?`);x("XRANGEPLAINLOOSE",`[v=\\s]*(${y[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${y[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${y[m.XRANGEIDENTIFIERLOOSE]})(?:${y[m.PRERELEASELOOSE]})?${y[m.BUILD]}?)?)?`);x("XRANGE",`^${y[m.GTLT]}\\s*${y[m.XRANGEPLAIN]}$`);x("XRANGELOOSE",`^${y[m.GTLT]}\\s*${y[m.XRANGEPLAINLOOSE]}$`);x("COERCE",`(^|[^\\d])(\\d{1,${St}})(?:\\.(\\d{1,${St}}))?(?:\\.(\\d{1,${St}}))?(?:$|[^\\d])`);x("COERCERTL",y[m.COERCE],!0);x("LONETILDE","(?:~>?)");x("TILDETRIM",`(\\s*)${y[m.LONETILDE]}\\s+`,!0);me.tildeTrimReplace="$1~";x("TILDE",`^${y[m.LONETILDE]}${y[m.XRANGEPLAIN]}$`);x("TILDELOOSE",`^${y[m.LONETILDE]}${y[m.XRANGEPLAINLOOSE]}$`);x("LONECARET","(?:\\^)");x("CARETTRIM",`(\\s*)${y[m.LONECARET]}\\s+`,!0);me.caretTrimReplace="$1^";x("CARET",`^${y[m.LONECARET]}${y[m.XRANGEPLAIN]}$`);x("CARETLOOSE",`^${y[m.LONECARET]}${y[m.XRANGEPLAINLOOSE]}$`);x("COMPARATORLOOSE",`^${y[m.GTLT]}\\s*(${y[m.LOOSEPLAIN]})$|^$`);x("COMPARATOR",`^${y[m.GTLT]}\\s*(${y[m.FULLPLAIN]})$|^$`);x("COMPARATORTRIM",`(\\s*)${y[m.GTLT]}\\s*(${y[m.LOOSEPLAIN]}|${y[m.XRANGEPLAIN]})`,!0);me.comparatorTrimReplace="$1$2$3";x("HYPHENRANGE",`^\\s*(${y[m.XRANGEPLAIN]})\\s+-\\s+(${y[m.XRANGEPLAIN]})\\s*$`);x("HYPHENRANGELOOSE",`^\\s*(${y[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${y[m.XRANGEPLAINLOOSE]})\\s*$`);x("STAR","(<|>)?=?\\s*\\*");x("GTE0","^\\s*>=\\s*0.0.0\\s*$");x("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var Fe=S((oo,Yr)=>{var Ui=["includePrerelease","loose","rtl"],Mi=t=>t?typeof t!="object"?{loose:!0}:Ui.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};Yr.exports=Mi});var ts=S((uo,es)=>{var zr=/^[0-9]+$/,Jr=(t,e)=>{let r=zr.test(t),s=zr.test(e);return r&&s&&(t=+t,e=+e),t===e?0:r&&!s?-1:s&&!r?1:t<e?-1:1},qi=(t,e)=>Jr(e,t);es.exports={compareIdentifiers:Jr,rcompareIdentifiers:qi}});var Ne=S((lo,is)=>{var at=ke(),{MAX_LENGTH:rs,MAX_SAFE_INTEGER:ot}=it(),{re:ss,t:ns}=Be(),ki=Fe(),{compareIdentifiers:Xe}=ts(),ne=class{constructor(e,r){if(r=ki(r),e instanceof ne){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>rs)throw new TypeError(`version is longer than ${rs} characters`);at("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let s=e.trim().match(r.loose?ss[ns.LOOSE]:ss[ns.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>ot||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ot||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ot||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<ot)return i}return n}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(at("SemVer.compare",this.version,this.options,e),!(e instanceof ne)){if(typeof e=="string"&&e===this.version)return 0;e=new ne(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ne||(e=new ne(e,this.options)),Xe(this.major,e.major)||Xe(this.minor,e.minor)||Xe(this.patch,e.patch)}comparePre(e){if(e instanceof ne||(e=new ne(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let s=this.prerelease[r],n=e.prerelease[r];if(at("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Xe(s,n)}while(++r)}compareBuild(e){e instanceof ne||(e=new ne(e,this.options));let r=0;do{let s=this.build[r],n=e.build[r];if(at("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Xe(s,n)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};is.exports=ne});var cs=S((co,ls)=>{var{MAX_LENGTH:Bi}=it(),{re:as,t:os}=Be(),us=Ne(),Fi=Fe(),Xi=(t,e)=>{if(e=Fi(e),t instanceof us)return t;if(typeof t!="string"||t.length>Bi||!(e.loose?as[os.LOOSE]:as[os.FULL]).test(t))return null;try{return new us(t,e)}catch(s){return null}};ls.exports=Xi});var _e=S((fo,ps)=>{var fs=Ne(),ji=(t,e,r)=>new fs(t,r).compare(new fs(e,r));ps.exports=ji});var _t=S((po,hs)=>{var Ki=_e(),Wi=(t,e,r)=>Ki(t,e,r)===0;hs.exports=Wi});var Rs=S((ho,Es)=>{var gs=cs(),Vi=_t(),Qi=(t,e)=>{if(Vi(t,e))return null;{let r=gs(t),s=gs(e),n=r.prerelease.length||s.prerelease.length,i=n?"pre":"",a=n?"prerelease":"";for(let o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==s[o])return i+o;return a}};Es.exports=Qi});var ds=S((go,As)=>{"use strict";As.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var ms=S((Eo,ys)=>{"use strict";ys.exports=O;O.Node=Te;O.create=O;function O(t){var e=this;if(e instanceof O||(e=new O),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)e.push(arguments[r]);return e}O.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};O.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};O.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};O.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Yi(this,arguments[t]);return this.length};O.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)zi(this,arguments[t]);return this.length};O.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};O.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};O.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,s=0;r!==null;s++)t.call(e,r.value,s,this),r=r.next};O.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,s=this.length-1;r!==null;s--)t.call(e,r.value,s,this),r=r.prev};O.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};O.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};O.prototype.map=function(t,e){e=e||this;for(var r=new O,s=this.head;s!==null;)r.push(t.call(e,s.value,this)),s=s.next;return r};O.prototype.mapReverse=function(t,e){e=e||this;for(var r=new O,s=this.tail;s!==null;)r.push(t.call(e,s.value,this)),s=s.prev;return r};O.prototype.reduce=function(t,e){var r,s=this.head;if(arguments.length>1)r=e;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;s!==null;n++)r=t(r,s.value,n),s=s.next;return r};O.prototype.reduceReverse=function(t,e){var r,s=this.tail;if(arguments.length>1)r=e;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;s!==null;n--)r=t(r,s.value,n),s=s.prev;return r};O.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};O.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};O.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new O;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(;n!==null&&s<e;s++,n=n.next)r.push(n.value);return r};O.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new O;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=this.length,n=this.tail;n!==null&&s>e;s--)n=n.prev;for(;n!==null&&s>t;s--,n=n.prev)r.push(n.value);return r};O.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(var i=[],s=0;n&&s<e;s++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var s=0;s<r.length;s++)n=Zi(this,n,r[s]);return i};O.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=e,this.tail=t,this};function Zi(t,e,r){var s=e===t.head?new Te(r,null,e,t):new Te(r,e,e.next,t);return s.next===null&&(t.tail=s),s.prev===null&&(t.head=s),t.length++,s}function Yi(t,e){t.tail=new Te(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function zi(t,e){t.head=new Te(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Te(t,e,r,s){if(!(this instanceof Te))return new Te(t,e,r,s);this.list=s,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ds()(O)}catch(t){}});var Ts=S((Ro,_s)=>{"use strict";var Ji=ms(),Ie=Symbol("max"),Ae=Symbol("length"),He=Symbol("lengthCalculator"),je=Symbol("allowStale"),be=Symbol("maxAge"),de=Symbol("dispose"),$s=Symbol("noDisposeOnSet"),W=Symbol("lruList"),oe=Symbol("cache"),vs=Symbol("updateAgeOnGet"),Tt=()=>1,Cs=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Ie]=e.max||Infinity,s=e.length||Tt;if(this[He]=typeof s!="function"?Tt:s,this[je]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[be]=e.maxAge||0,this[de]=e.dispose,this[$s]=e.noDisposeOnSet||!1,this[vs]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ie]=e||Infinity,Ke(this)}get max(){return this[Ie]}set allowStale(e){this[je]=!!e}get allowStale(){return this[je]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[be]=e,Ke(this)}get maxAge(){return this[be]}set lengthCalculator(e){typeof e!="function"&&(e=Tt),e!==this[He]&&(this[He]=e,this[Ae]=0,this[W].forEach(r=>{r.length=this[He](r.value,r.key),this[Ae]+=r.length})),Ke(this)}get lengthCalculator(){return this[He]}get length(){return this[Ae]}get itemCount(){return this[W].length}rforEach(e,r){r=r||this;for(let s=this[W].tail;s!==null;){let n=s.prev;Ss(this,e,s,r),s=n}}forEach(e,r){r=r||this;for(let s=this[W].head;s!==null;){let n=s.next;Ss(this,e,s,r),s=n}}keys(){return this[W].toArray().map(e=>e.key)}values(){return this[W].toArray().map(e=>e.value)}reset(){this[de]&&this[W]&&this[W].length&&this[W].forEach(e=>this[de](e.key,e.value)),this[oe]=new Map,this[W]=new Ji,this[Ae]=0}dump(){return this[W].map(e=>ut(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[W]}set(e,r,s){if(s=s||this[be],s&&typeof s!="number")throw new TypeError("maxAge must be a number");let n=s?Date.now():0,i=this[He](r,e);if(this[oe].has(e)){if(i>this[Ie])return we(this,this[oe].get(e)),!1;let l=this[oe].get(e).value;return this[de]&&(this[$s]||this[de](e,l.value)),l.now=n,l.maxAge=s,l.value=r,this[Ae]+=i-l.length,l.length=i,this.get(e),Ke(this),!0}let a=new xs(e,r,i,n,s);return a.length>this[Ie]?(this[de]&&this[de](e,r),!1):(this[Ae]+=a.length,this[W].unshift(a),this[oe].set(e,this[W].head),Ke(this),!0)}has(e){if(!this[oe].has(e))return!1;let r=this[oe].get(e).value;return!ut(this,r)}get(e){return It(this,e,!0)}peek(e){return It(this,e,!1)}pop(){let e=this[W].tail;return e?(we(this,e),e.value):null}del(e){we(this,this[oe].get(e))}load(e){this.reset();let r=Date.now();for(let s=e.length-1;s>=0;s--){let n=e[s],i=n.e||0;if(i===0)this.set(n.k,n.v);else{let a=i-r;a>0&&this.set(n.k,n.v,a)}}}prune(){this[oe].forEach((e,r)=>It(this,r,!1))}},It=(t,e,r)=>{let s=t[oe].get(e);if(s){let n=s.value;if(ut(t,n)){if(we(t,s),!t[je])return}else r&&(t[vs]&&(s.value.now=Date.now()),t[W].unshiftNode(s));return n.value}},ut=(t,e)=>{if(!e||!e.maxAge&&!t[be])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[be]&&r>t[be]},Ke=t=>{if(t[Ae]>t[Ie])for(let e=t[W].tail;t[Ae]>t[Ie]&&e!==null;){let r=e.prev;we(t,e),e=r}},we=(t,e)=>{if(e){let r=e.value;t[de]&&t[de](r.key,r.value),t[Ae]-=r.length,t[oe].delete(r.key),t[W].removeNode(e)}},xs=class{constructor(e,r,s,n,i){this.key=e,this.value=r,this.length=s,this.now=n,this.maxAge=i||0}},Ss=(t,e,r,s)=>{let n=r.value;ut(t,n)&&(we(t,r),t[je]||(n=void 0)),n&&e.call(s,n.value,n.key,t)};_s.exports=Cs});var bs=S((Ao,Is)=>{var ea=_e(),ta=(t,e,r)=>ea(t,e,r)!==0;Is.exports=ta});var bt=S((yo,Ls)=>{var ra=_e(),sa=(t,e,r)=>ra(t,e,r)>0;Ls.exports=sa});var Ns=S((mo,Os)=>{var na=_e(),ia=(t,e,r)=>na(t,e,r)>=0;Os.exports=ia});var ws=S(($o,Hs)=>{var aa=_e(),oa=(t,e,r)=>aa(t,e,r)<0;Hs.exports=oa});var Ds=S((vo,Ps)=>{var ua=_e(),la=(t,e,r)=>ua(t,e,r)<=0;Ps.exports=la});var Us=S((Co,Gs)=>{var ca=_t(),fa=bs(),pa=bt(),ha=Ns(),ga=ws(),Ea=Ds(),Ra=(t,e,r,s)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return ca(t,r,s);case"!=":return fa(t,r,s);case">":return pa(t,r,s);case">=":return ha(t,r,s);case"<":return ga(t,r,s);case"<=":return Ea(t,r,s);default:throw new TypeError(`Invalid operator: ${e}`)}};Gs.exports=Ra});var Xs=S((xo,Fs)=>{var We=Symbol("SemVer ANY"),Ve=class{static get ANY(){return We}constructor(e,r){if(r=Aa(r),e instanceof Ve){if(e.loose===!!r.loose)return e;e=e.value}Ot("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===We?this.value="":this.value=this.operator+this.semver.version,Ot("comp",this)}parse(e){let r=this.options.loose?Ms[qs.COMPARATORLOOSE]:Ms[qs.COMPARATOR],s=e.match(r);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new ks(s[2],this.options.loose):this.semver=We}toString(){return this.value}test(e){if(Ot("Comparator.test",e,this.options.loose),this.semver===We||e===We)return!0;if(typeof e=="string")try{e=new ks(e,this.options)}catch(r){return!1}return Lt(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Ve))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Bs(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new Bs(this.value,r).test(e.semver);let s=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),n=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),i=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Lt(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),l=Lt(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return s||n||i&&a||o||l}};Fs.exports=Ve;var Aa=Fe(),{re:Ms,t:qs}=Be(),Lt=Us(),Ot=ke(),ks=Ne(),Bs=Nt()});var Nt=S((So,Vs)=>{var Pe=class{constructor(e,r){if(r=ya(r),e instanceof Pe)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Pe(e.raw,r);if(e instanceof Ht)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(n=>!Ks(n[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&xa(n[0])){this.set=[n];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let s=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=js.get(s);if(n)return n;let i=this.options.loose,a=i?Q[V.HYPHENRANGELOOSE]:Q[V.HYPHENRANGE];e=e.replace(a,wa(this.options.includePrerelease)),B("hyphen replace",e),e=e.replace(Q[V.COMPARATORTRIM],$a),B("comparator trim",e,Q[V.COMPARATORTRIM]),e=e.replace(Q[V.TILDETRIM],va),e=e.replace(Q[V.CARETTRIM],Ca),e=e.split(/\s+/).join(" ");let o=i?Q[V.COMPARATORLOOSE]:Q[V.COMPARATOR],l=e.split(" ").map(u=>Sa(u,this.options)).join(" ").split(/\s+/).map(u=>Ha(u,this.options)).filter(this.options.loose?u=>!!u.match(o):()=>!0).map(u=>new Ht(u,this.options)),g=l.length,h=new Map;for(let u of l){if(Ks(u))return[u];h.set(u.value,u)}h.size>1&&h.has("")&&h.delete("");let E=[...h.values()];return js.set(s,E),E}intersects(e,r){if(!(e instanceof Pe))throw new TypeError("a Range is required");return this.set.some(s=>Ws(s,r)&&e.set.some(n=>Ws(n,r)&&s.every(i=>n.every(a=>i.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ma(e,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(Pa(this.set[r],e,this.options))return!0;return!1}};Vs.exports=Pe;var da=Ts(),js=new da({max:1e3}),ya=Fe(),Ht=Xs(),B=ke(),ma=Ne(),{re:Q,t:V,comparatorTrimReplace:$a,tildeTrimReplace:va,caretTrimReplace:Ca}=Be(),Ks=t=>t.value==="<0.0.0-0",xa=t=>t.value==="",Ws=(t,e)=>{let r=!0,s=t.slice(),n=s.pop();for(;r&&s.length;)r=s.every(i=>n.intersects(i,e)),n=s.pop();return r},Sa=(t,e)=>(B("comp",t,e),t=Ia(t,e),B("caret",t),t=_a(t,e),B("tildes",t),t=La(t,e),B("xrange",t),t=Na(t,e),B("stars",t),t),Y=t=>!t||t.toLowerCase()==="x"||t==="*",_a=(t,e)=>t.trim().split(/\s+/).map(r=>Ta(r,e)).join(" "),Ta=(t,e)=>{let r=e.loose?Q[V.TILDELOOSE]:Q[V.TILDE];return t.replace(r,(s,n,i,a,o)=>{B("tilde",t,s,n,i,a,o);let l;return Y(n)?l="":Y(i)?l=`>=${n}.0.0 <${+n+1}.0.0-0`:Y(a)?l=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(B("replaceTilde pr",o),l=`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`):l=`>=${n}.${i}.${a} <${n}.${+i+1}.0-0`,B("tilde return",l),l})},Ia=(t,e)=>t.trim().split(/\s+/).map(r=>ba(r,e)).join(" "),ba=(t,e)=>{B("caret",t,e);let r=e.loose?Q[V.CARETLOOSE]:Q[V.CARET],s=e.includePrerelease?"-0":"";return t.replace(r,(n,i,a,o,l)=>{B("caret",t,n,i,a,o,l);let g;return Y(i)?g="":Y(a)?g=`>=${i}.0.0${s} <${+i+1}.0.0-0`:Y(o)?i==="0"?g=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.0${s} <${+i+1}.0.0-0`:l?(B("replaceCaret pr",l),i==="0"?a==="0"?g=`>=${i}.${a}.${o}-${l} <${i}.${a}.${+o+1}-0`:g=`>=${i}.${a}.${o}-${l} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.${o}-${l} <${+i+1}.0.0-0`):(B("no pr"),i==="0"?a==="0"?g=`>=${i}.${a}.${o}${s} <${i}.${a}.${+o+1}-0`:g=`>=${i}.${a}.${o}${s} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.${o} <${+i+1}.0.0-0`),B("caret return",g),g})},La=(t,e)=>(B("replaceXRanges",t,e),t.split(/\s+/).map(r=>Oa(r,e)).join(" ")),Oa=(t,e)=>{t=t.trim();let r=e.loose?Q[V.XRANGELOOSE]:Q[V.XRANGE];return t.replace(r,(s,n,i,a,o,l)=>{B("xRange",t,s,n,i,a,o,l);let g=Y(i),h=g||Y(a),E=h||Y(o),u=E;return n==="="&&u&&(n=""),l=e.includePrerelease?"-0":"",g?n===">"||n==="<"?s="<0.0.0-0":s="*":n&&u?(h&&(a=0),o=0,n===">"?(n=">=",h?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",h?i=+i+1:a=+a+1),n==="<"&&(l="-0"),s=`${n+i}.${a}.${o}${l}`):h?s=`>=${i}.0.0${l} <${+i+1}.0.0-0`:E&&(s=`>=${i}.${a}.0${l} <${i}.${+a+1}.0-0`),B("xRange return",s),s})},Na=(t,e)=>(B("replaceStars",t,e),t.trim().replace(Q[V.STAR],"")),Ha=(t,e)=>(B("replaceGTE0",t,e),t.trim().replace(Q[e.includePrerelease?V.GTE0PRE:V.GTE0],"")),wa=t=>(e,r,s,n,i,a,o,l,g,h,E,u,L)=>(Y(s)?r="":Y(n)?r=`>=${s}.0.0${t?"-0":""}`:Y(i)?r=`>=${s}.${n}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Y(g)?l="":Y(h)?l=`<${+g+1}.0.0-0`:Y(E)?l=`<${g}.${+h+1}.0-0`:u?l=`<=${g}.${h}.${E}-${u}`:t?l=`<${g}.${h}.${+E+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),Pa=(t,e,r)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let s=0;s<t.length;s++)if(B(t[s].semver),t[s].semver!==Ht.ANY&&t[s].semver.prerelease.length>0){let n=t[s].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var Ys=S((_o,Zs)=>{var wt=Ne(),Da=Nt(),Qs=bt(),Ga=(t,e)=>{t=new Da(t,e);let r=new wt("0.0.0");if(t.test(r)||(r=new wt("0.0.0-0"),t.test(r)))return r;r=null;for(let s=0;s<t.set.length;++s){let n=t.set[s],i=null;n.forEach(a=>{let o=new wt(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||Qs(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||Qs(r,i))&&(r=i)}return r&&t.test(r)?r:null};Zs.exports=Ga});var qa={};gn(qa,{default:()=>Ma});var U=Ce(Ee("@yarnpkg/core")),pe=Ce(Ee("@yarnpkg/fslib")),zs=Ce(Ee("@yarnpkg/plugin-essentials")),ye=Ce(Ee("clipanion")),Js=Ce(Wr()),en=Ce(Rs()),tn=Ce(Ys()),rn={maxPackageUpdates:!1,preserveSemVerRange:!0},lt=class extends ye.Command{constructor(){super(...arguments);this.configFilename=ye.Option.String("--config","semver-up.json");this.changesetFilename=ye.Option.String("--changeset",{required:!1});this.dryRun=ye.Option.Boolean("--dry-run",!1);this.preserveSemVerRange=ye.Option.Boolean("--preserve-semver",!0);this.ruleGlobs=ye.Option.Rest()}async execute(){try{let e=await U.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await U.Project.find(e,this.context.cwd),s=await U.Cache.find(e);await r.restoreInstallState();let n=await this.parseConfigFile(),i=r.topLevelWorkspace,a=async g=>{let h=await g.startTimerPromise("Processing Semver Up Rules",{skipIfEmpty:!1},async()=>this.getRulesWithPackages({config:n,workspace:i,report:g})),E=await g.startTimerPromise("Finding Updates",{skipIfEmpty:!1},async()=>this.findUpdateCandidates({workspace:i,rulesWithPackages:h,cache:s,configuration:e,report:g})),u=await g.startTimerPromise("Staging Updates",{skipIfEmpty:!1},async()=>this.applyUpdates({config:n,workspace:i,rulesWithUpdates:E,report:g}));await g.startTimerPromise("Writing Changeset File",{skipIfEmpty:!0},async()=>{await this.writeChangeset({changeset:u})}),this.dryRun||await r.install({cache:s,report:g})};if(this.changesetFilename==="-"){try{await a(new U.ThrowReport)}catch(g){return 1}return 0}return(await U.StreamReport.start({configuration:e,stdout:this.context.stdout},a)).exitCode()}catch(e){return this.context.stderr.write(`${String(e)}
`),1}}async parseConfigFile(){var i,a,o;let e=pe.ppath.resolve(pe.ppath.cwd(),pe.npath.toPortablePath(this.configFilename)),r={};try{r=U.miscUtils.dynamicRequire(e)}catch(l){r={rules:[["*",{}]]}}let n={rules:((i=r==null?void 0:r.rules)!=null?i:[]).map(([l,g])=>[l,P(K(P({},rn),{preserveSemVerRange:this.preserveSemVerRange}),g)]),maxRulesApplied:(a=r==null?void 0:r.maxRulesApplied)!=null?a:1,skipManifestOnlyChanges:(o=r==null?void 0:r.skipManifestOnlyChanges)!=null?o:!1};if(this.ruleGlobs.length){n.rules=[],n.maxRulesApplied=!1;for(let l of this.ruleGlobs)n.rules.push([l,K(P({},rn),{preserveSemVerRange:this.preserveSemVerRange})])}return n}async getRulesWithPackages({config:e,workspace:r,report:s}){let n=r.manifest,i=e.rules.map(([g,h])=>[g,{rule:h,packages:new Set}]),a=[...n.dependencies.entries(),...n.devDependencies.entries()],o=U.StreamReport.progressViaCounter(a.length),l=s.reportProgress(o);for(let[g,h]of a){let E=i.find(([u])=>(0,Js.default)([U.structUtils.stringifyIdent(h)],u).length>0);E&&E[1].packages.add(g),o.tick()}return await l,i}async findUpdateCandidates({workspace:e,rulesWithPackages:r,cache:s,configuration:n,report:i}){let a=new Map([...e.manifest.dependencies.entries(),...e.manifest.devDependencies.entries()]),o=new Map;for(let[l,{rule:g,packages:h}]of r){let E=new Map,u=U.StreamReport.progressViaCounter(h.size),L=i.reportProgress(u);for(let $ of h){let d=a.get($);if(!d){u.tick();continue}let C=U.structUtils.parseRange(d.range);if(!(C.protocol===null&&n.get("defaultProtocol")==="npm:"||C.protocol==="npm:")){u.tick();continue}let N=U.structUtils.convertToIdent(d),H=await zs.suggestUtils.fetchDescriptorFrom(N,g.preserveSemVerRange?d==null?void 0:d.range:"latest",{project:e.project,workspace:e,preserveModifier:!0,cache:s});H&&d.range!==H.range&&E.set(N.identHash,H),u.tick()}E.size&&o.set(l,E),await L}return o}getInstalledVersion({descriptorHash:e,project:r}){let s=r.storedResolutions.get(e);if(s){let n=r.storedPackages.get(s);if(n)return n.version}return null}extractVersionFromRange(e){let r=(0,tn.default)(e,{loose:!0});return r?r.version:e}getUpdateType({fromVersion:e,toVersion:r}){if(!e||!r)return null;try{return(0,en.default)(e,r,{loose:!0})}catch(s){return null}}async applyUpdates({config:e,rulesWithUpdates:r,workspace:s,report:n}){let i=new Map,a=new Map(e.rules),o=0;for(let[l,g]of r.entries()){let h=a.get(l);if(!h)continue;if(e.maxRulesApplied&&o>=e.maxRulesApplied)break;let E=0;for(let[u,L]of g.entries()){if(h.maxPackageUpdates&&E>=h.maxPackageUpdates)break;let $=U.structUtils.stringifyIdent(U.structUtils.convertToIdent(L)),d=s.dependencies.get(u);if(!d)continue;let C=U.structUtils.parseRange(d.range).selector,_=U.structUtils.parseRange(L.range).selector,N=this.getInstalledVersion({descriptorHash:d.descriptorHash,project:s.project}),H=this.extractVersionFromRange(_);if(!(N===H&&e.skipManifestOnlyChanges)){i.set($,{fromRange:C,toRange:_,fromVersion:N,toVersion:H,updateType:this.getUpdateType({fromVersion:N,toVersion:H})}),n.reportInfo(U.MessageName.UNNAMED,`[${l}] ${$}: ${C} -> ${_}`);for(let M of["dependencies","devDependencies"])s.manifest.getForScope(M).has(u)&&s.manifest.getForScope(M).set(u,L);this.dryRun||s.project.forgetResolution(d),E+=1}}E&&(o+=1)}return i}async writeChangeset({changeset:e}){if(!this.changesetFilename)return;let r={};for(let[n,i]of e.entries())r[n]={from_version:i.fromVersion,from_range:i.fromRange,to_version:i.toVersion,to_range:i.toRange,update_type:i.updateType,release_notes:null};let s=JSON.stringify(r,null,2);if(this.changesetFilename==="-")this.context.stdout.write(s);else{let n=pe.ppath.resolve(pe.ppath.cwd(),pe.npath.toPortablePath(this.changesetFilename));await pe.xfs.writeFilePromise(n,s,{encoding:"utf8"})}}};lt.paths=[["semver","up"]],lt.usage=ye.Command.Usage({description:"",details:"",examples:[]});var Ua={hooks:{},commands:[lt]},Ma=Ua;return qa;})();
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
return plugin;
}
};
